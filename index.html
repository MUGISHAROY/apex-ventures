<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apex General Ventures | Enterprise Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- THEME --- */
        :root { --primary: #FFD700; --bg-body: #050505; --bg-nav: rgba(5, 5, 5, 0.95); --bg-surface: #121212; --bg-sidebar: #0a0a0a; --text-main: #ffffff; --text-muted: #888888; --border: #222222; --shadow: rgba(0,0,0,0.5); }
        body.light-mode { --bg-body: #f4f4f4; --bg-nav: rgba(255, 255, 255, 0.95); --bg-surface: #ffffff; --bg-sidebar: #ffffff; --text-main: #111111; --text-muted: #666666; --border: #e0e0e0; --shadow: rgba(0,0,0,0.1); }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; transition: background 0.3s, color 0.3s, border-color 0.3s; }
        body { background-color: var(--bg-body); color: var(--text-main); overflow-x: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        /* NAV */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 12px 25px; background-color: var(--bg-nav); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border); }
        .logo { font-size: 1.4rem; font-weight: 800; letter-spacing: 0.5px; text-transform: uppercase; }
        .logo span { color: var(--primary); }
        .nav-actions { display: flex; gap: 15px; align-items: center; position: relative; }
        .icon-btn { background: transparent; border: 1px solid var(--border); color: var(--text-main); width: 35px; height: 35px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; }
        .icon-btn:hover { border-color: var(--primary); color: var(--primary); }
        .cta-btn { background: var(--primary); color: #000; border: none; padding: 8px 18px; border-radius: 5px; cursor: pointer; font-weight: 700; text-decoration: none; font-size: 0.9rem; }
        
        /* LAYOUT */
        .layout { display: flex; flex: 1; overflow: hidden; }
        .sidebar { width: 260px; background: var(--bg-sidebar); border-right: 1px solid var(--border); padding: 20px; display: flex; flex-direction: column; gap: 10px; overflow-y: auto; }
        .cat-btn { background: transparent; color: var(--text-muted); border: none; padding: 10px 15px; cursor: pointer; font-weight: 500; text-align: left; border-radius: 6px; transition: 0.2s; }
        .cat-btn:hover { background: rgba(128,128,128,0.1); color: var(--text-main); }
        .cat-btn.active { background: var(--primary); color: #000; font-weight: 700; }
        .main-content { flex: 1; overflow-y: auto; padding: 0; position: relative; }
        
        /* HERO */
        .hero { position: relative; height: 40vh; display: flex; align-items: center; justify-content: center; text-align: center; background: #000; overflow: hidden; margin-bottom: 20px; }
        .hero-content { position: relative; z-index: 2; padding: 20px; }
        .hero h1 { font-size: 2.5rem; margin-bottom: 5px; font-weight: 800; color: #fff; }
        .hero p { color: #ccc; }
        
        /* GRID */
        .toolbar { display: flex; justify-content: space-between; align-items: center; padding: 0 30px 20px 30px; border-bottom: 1px solid var(--border); margin-bottom: 30px; }
        .grid-container { padding: 0 30px 60px 30px; display: grid; gap: 20px; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); }
        .card { background: var(--bg-surface); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; transition: 0.2s; cursor: pointer; display: flex; flex-direction: column; }
        .card:hover { transform: translateY(-3px); border-color: var(--primary); box-shadow: 0 5px 15px var(--shadow); }
        .card img { width: 100%; height: 180px; object-fit: cover; background: #222; }
        .card-details { padding: 15px; flex: 1; display: flex; flex-direction: column; }
        .card-cat { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 5px; }
        .card-title { font-size: 0.95rem; font-weight: 600; color: var(--text-main); margin-bottom: 5px; }
        .card-price { font-size: 1.1rem; color: var(--primary); font-weight: 700; margin-top: auto; }
        .card-condition { font-size: 0.75rem; color: var(--text-muted); margin-top: 5px; }
        
        /* COLOR PICKER */
        .color-panel { position: absolute; top: 50px; right: 0; background: var(--bg-surface); border: 1px solid var(--border); padding: 15px; border-radius: 10px; display: none; grid-template-columns: repeat(3, 1fr); gap: 10px; z-index: 1100; }
        .color-panel.show { display: grid; }
        .color-dot { width: 30px; height: 30px; border-radius: 50%; cursor: pointer; border: 2px solid transparent; }
        
        @media(max-width: 768px) { .layout { flex-direction: column; } .sidebar { width: 100%; flex-direction: row; overflow-x: auto; padding: 10px; } .cat-btn { white-space: nowrap; } .grid-container { grid-template-columns: 1fr 1fr; padding: 0 15px 60px 15px; } }
    </style>
</head>
<body>
    <nav>
        <div class="logo">APEX <span>VENTURES</span></div>
        <div class="nav-actions">
            <button class="icon-btn" onclick="toggleTheme()" title="Toggle Theme">â—‘</button>
            <button class="icon-btn" onclick="toggleColorPanel()" title="Change Color">ðŸŽ¨</button>
            <div class="color-panel" id="colorPanel">
                <div class="color-dot" style="background: #FFD700;" onclick="setColor('#FFD700')"></div>
                <div class="color-dot" style="background: #007BFF;" onclick="setColor('#007BFF')"></div>
                <div class="color-dot" style="background: #28a745;" onclick="setColor('#28a745')"></div>
                <div class="color-dot" style="background: #dc3545;" onclick="setColor('#dc3545')"></div>
            </div>
            <a href="#" onclick="openWA()" class="cta-btn">WhatsApp</a>
        </div>
    </nav>

    <div class="layout">
        <aside class="sidebar">
            <button class="cat-btn active" onclick="filter('all', this)">All Inventory</button>
            <button class="cat-btn" onclick="filter('phone', this)">Smartphones</button>
            <button class="cat-btn" onclick="filter('computing', this)">Laptops & PC</button>
            <button class="cat-btn" onclick="filter('gaming', this)">Gaming</button>
            <button class="cat-btn" onclick="filter('home', this)">Home</button>
            <button class="cat-btn" onclick="filter('motors', this)">Motors</button>
            <button class="cat-btn" onclick="filter('materials', this)">Construction</button>
        </aside>

        <main class="main-content">
            <section class="hero">
                <div class="hero-content">
                    <h1>The Sourcing Platform</h1>
                    <p>Direct Bond Links. Wholesale Tech. Verified Quality.</p>
                </div>
            </section>

            <div class="toolbar"><h2 id="categoryTitle">All Inventory</h2></div>
            <div class="grid-container" id="productGrid">
                </div>
        </main>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // *** YOUR REAL KEYS FROM THE SCREENSHOT ***
        const firebaseConfig = {
            apiKey: "AIzaSyB6Y-7jvZD_K0VlCXqej0I7QVMWvfZIoDE",
            authDomain: "apex-ventures.firebaseapp.com",
            projectId: "apex-ventures",
            storageBucket: "apex-ventures.firebasestorage.app",
            messagingSenderId: "408272395714",
            appId: "1:408272395714:web:dc6de0756f694b7028ca5b"
        };
        // ****************************************

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const dbCollection = collection(db, "inventory");

        let inventory = [];

        // 1. LOAD DATA
        async function loadProducts() {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '<p style="margin:20px; color:#666;">Loading latest stock...</p>';
            
            try {
                const q = query(dbCollection);
                const querySnapshot = await getDocs(q);
                inventory = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    inventory.push({
                        cat: data.cat,
                        title: data.name,
                        price: new Intl.NumberFormat('en-UG', { style: 'currency', currency: 'UGX' }).format(data.price),
                        cond: data.cond,
                        img: data.img
                    });
                });
                window.render('all'); 
            } catch (error) {
                console.error("Error:", error);
                grid.innerHTML = '<p style="color:red; margin:20px;">Could not connect to database.</p>';
            }
        }

        // 2. RENDER
        window.render = function(filter) {
            const grid = document.getElementById('productGrid');
            const catTitle = document.getElementById('categoryTitle');
            grid.innerHTML = '';
            
            const items = filter === 'all' ? inventory : inventory.filter(i => i.cat === filter);
            catTitle.innerText = filter === 'all' ? "All Inventory" : filter.toUpperCase();

            if(items.length === 0) {
                grid.innerHTML = `<p style="color:#666; grid-column:1/-1; text-align:center;">No stock in this category currently.</p>`;
                return;
            }

            items.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => window.inquire(item.title);
                card.innerHTML = `
                    <img src="${item.img}" onerror="this.src='https://via.placeholder.com/300?text=Apex+Stock'">
                    <div class="card-details">
                        <div class="card-title">${item.title}</div>
                        <div class="card-cat">${item.cat.toUpperCase()}</div>
                        <div class="card-condition">${item.cond}</div>
                        <div class="card-price">${item.price}</div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // 3. UI HELPERS
        window.filter = function(cat, btn) {
            window.render(cat);
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');
        }
        window.toggleTheme = function() { document.body.classList.toggle('light-mode'); }
        window.toggleColorPanel = function() { document.getElementById('colorPanel').classList.toggle('show'); }
        window.setColor = function(color) {
            document.body.style.setProperty('--primary', color);
            document.getElementById('colorPanel').classList.remove('show');
        }
        
        const myNumber = "256757081676";
        window.openWA = function() { window.open(`https://wa.me/${myNumber}`, '_blank'); }
        window.inquire = function(item) { window.open(`https://wa.me/${myNumber}?text=Inquiry: ${item}`, '_blank'); }

        loadProducts();
    </script>
</body>
</html>